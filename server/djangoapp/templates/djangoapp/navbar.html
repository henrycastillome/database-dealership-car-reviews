<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="UTF-8" />

  <title>{% block title %}{% endblock %}</title>
  <base href="/"> 
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link href="{% static 'djangoapp/front.css' %}" rel="stylesheet" type="text/css">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
  <link href="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.js"></script>
  <script
    src="https://unpkg.com/bootstrap-table@1.18.2/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/all.min.css" rel="stylesheet">
</head>

<body onload="showPage()">

  <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 bg-white border-bottom box-shadow">
    <h5 class="my-0 mr-md-auto font-weight-normal">CarDealershipReview</h5>
    <nav class="my-2 my-md-0 mr-md-3">
      <a class="p-2 text-dark" onclick="showLoader()" href="{% url 'djangoapp:index' %}">Home</a>
      <a class="p-2 text-dark" onclick="showLoader()" href="{% url 'djangoapp:about' %}"> About us</a>
      <a class="p-2 text-dark" onclick="showLoader()" href="{% url 'djangoapp:contact' %}">Contact us</a>
    </nav>
    {% if user.is_authenticated %}
    <nav>
      <a class="btn btn-link" onclick="showLoader()" href="#">{{ user.first_name }}({{ user.username }})</a>
      <a class="btn btn-link" onclick="showLoader()" href="{% url 'djangoapp:logout' %}">Logout</a>
    </nav>
    {% else %}


    <nav>
      <a class="btn btn-primary btn-rounded" onclick="showLoader()" href="{% url 'djangoapp:login' %}">Log in</a>
      <a class="btn btn-outline-primary btn-rounded" onclick="showLoader()" href="{% url 'djangoapp:registration' %}">Sign Up</a>
    </nav>
    {% endif %}

  </div>

  <main >
    <div style="padding-top: 1rem ;" class="text-center" id="loader" >
      <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>


    <div style="display: none;" id="content">{% block content %}{% endblock %}</div>

  </main>

  <script>
    var mycontent;

    function showPage(){
      console.log('showpage')
      mycontent=setTimeout(showContent, 1000)
    }

    function showContent(){
      
        console.log('showing content')
        document.getElementById("loader").style.display='none'
        document.getElementById('content').style.display=""

      
    }

    function showLoader(){
      console.log('showing loader')
      document.getElementById('loader').style.display=""
    }
  </script>



  <!-- Footer -->
  <footer class="text-center text-white " style="background-color: var(--primary-blue);">
    <!-- Grid container -->
    <div class="container p-4 pb-0">
      <!-- Section: CTA -->
      <section class="">
        <p class="d-flex justify-content-center align-items-center">
          <span class="me-3 pr-1">Register for free</span>
          <a href="{% url 'djangoapp:registration' %}"><button type="button" class="btn btn-outline-light btn-rounded">
              Sign up!
            </button>
          </a>
        </p>
      </section>
      <!-- Section: CTA -->
    </div>
    <!-- Grid container -->

    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
      Â© <span id="year"></span> Copyright:
      <a class="text-white" href="https://henrycastillo.dev/">henrycastillo.dev</a>
    </div>
    <!-- Copyright -->
  </footer>
  <!-- Footer -->

  <script>
    // getting the year for the footer
    const date = new Date()
    const year = date.getFullYear()
    document.getElementById('year').innerHTML = year

  </script>
</body>

</html>